<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>dealloc用法 | 涂世坤博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="使用场景MRC 123456789- (void)dealloc &amp;#123;    self.array = nil;    self.string = nil;    // 移除观察者    // 移除通知    // 非Objc对象内存的释放，如CFRelease(...)    // ... //    [super dealloc];&amp;#125; ARC 123456- (void)de">
<meta property="og:type" content="article">
<meta property="og:title" content="dealloc用法">
<meta property="og:url" content="http://yoursite.com/2018/08/08/dealloc用法/index.html">
<meta property="og:site_name" content="涂世坤博客">
<meta property="og:description" content="使用场景MRC 123456789- (void)dealloc &amp;#123;    self.array = nil;    self.string = nil;    // 移除观察者    // 移除通知    // 非Objc对象内存的释放，如CFRelease(...)    // ... //    [super dealloc];&amp;#125; ARC 123456- (void)de">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://oxn0lcico.bkt.clouddn.com/dealloc.gif">
<meta property="og:updated_time" content="2018-08-07T13:33:05.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dealloc用法">
<meta name="twitter:description" content="使用场景MRC 123456789- (void)dealloc &amp;#123;    self.array = nil;    self.string = nil;    // 移除观察者    // 移除通知    // 非Objc对象内存的释放，如CFRelease(...)    // ... //    [super dealloc];&amp;#125; ARC 123456- (void)de">
<meta name="twitter:image" content="http://oxn0lcico.bkt.clouddn.com/dealloc.gif">
  
    <link rel="alternative" href="/atom.xml" title="涂世坤博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <script src="/style.js"></script>
  

</head>
</html>
<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://upload.jianshu.io/users/upload_avatars/1944178/5c95d50c5d2c.gif?imageMogr/thumbnail/90x90/quality/100" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">涂世坤</a></h1>
		</hgroup>

		
		<p class="header-subtitle">保持学习</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/archives">概览</a></li>
	        
				<li><a href="/categories/OC">OC</a></li>
	        
				<li><a href="/categories/Other">其他</a></li>
	        
				<li><a href="/categories/Mac">Mac软件</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/tutu279737146" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/5616393521/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" title="weibo">weibo</a>
		        
					<a class="rss" target="_blank" href="#" title="rss">rss</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/tu-shi-zhan-8" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">涂世坤</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://upload.jianshu.io/users/upload_avatars/1944178/5c95d50c5d2c.gif?imageMogr/thumbnail/90x90/quality/100" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">涂世坤</h1>
			</hgroup>
			
			<p class="header-subtitle">保持学习</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">概览</a></li>
		        
					<li><a href="/categories/OC">OC</a></li>
		        
					<li><a href="/categories/Other">其他</a></li>
		        
					<li><a href="/categories/Mac">Mac软件</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/tutu279737146" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/5616393521/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/tu-shi-zhan-8" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-dealloc用法" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      dealloc用法
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><p><strong>MRC</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)dealloc &#123;</span><br><span class="line">    self.array = nil;</span><br><span class="line">    self.string = nil;</span><br><span class="line">    // 移除观察者</span><br><span class="line">    // 移除通知</span><br><span class="line">    // 非Objc对象内存的释放，如CFRelease(...)</span><br><span class="line">    // ... //</span><br><span class="line">    [super dealloc];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ARC</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (void)dealloc &#123;</span><br><span class="line">    // 移除观察者</span><br><span class="line">    // 移除通知</span><br><span class="line">    // 非Objc对象内存的释放，如CFRelease(...)</span><br><span class="line">    // ... //</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>对比发现:</strong></p>
<p>1.对象的实例变量释放不见了<br>2.没有显示的调用<code>[super dealloc]</code>,上层的析构不见了<br><a id="more"></a></p>
<p><strong>解释</strong>:</p>
<p><a href="http://clang.llvm.org/docs/AutomaticReferenceCounting.html#dealloc" target="_blank" rel="noopener">ARC官方文档</a></p>
<blockquote>
<p>A class may provide a method definition for an instance method named dealloc. This method will be called after the final release of the object but before it is deallocated or any of its instance variables are destroyed. The superclass’s implementation of dealloc will be called automatically when the method returns.</p>
</blockquote>
<ul>
<li>意思是说: 对象的dealloc方法在最后一次release后被调用,但此时实例变量(Ivars)并未释放,父类的dealloc方法将在子类的dealloc方法返回后自动调用</li>
</ul>
<blockquote>
<p>The instance variables for an ARC-compiled class will be destroyed at some point after control enters the dealloc method for the root class of the class. The ordering of the destruction of instance variables is unspecified, both within a single class and between subclasses and superclasses.</p>
</blockquote>
<ul>
<li>理解: ARC下对象的实例变量在根类[NSObject dealloc]中释放（通常root class都是NSObject），变量释放顺序各种不确定（一个类内的不确定，子类和父类间也不确定，也就是说不用care释放顺序）</li>
<li>所以ARC下的实例变量在根类NSObject析构是析构</li>
</ul>
<h3 id="NSObject-析构过程"><a href="#NSObject-析构过程" class="headerlink" title="NSObject 析构过程"></a>NSObject 析构过程</h3><ul>
<li><code>dealloc</code></li>
<li><code>_objc_rootDealloc</code></li>
<li><code>objc_dispose</code></li>
<li><code>objc_destructInstance</code></li>
</ul>
<p><strong><code>objc_destructInstance</code></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">void *objc_destructInstance(id obj)</span><br><span class="line">&#123;</span><br><span class="line">    if (obj) &#123;</span><br><span class="line">        Class isa_gen = _object_getClass(obj);</span><br><span class="line">        class_t *isa = newcls(isa_gen);</span><br><span class="line"></span><br><span class="line">        // Read all of the flags at once for performance.</span><br><span class="line">        bool cxx = hasCxxStructors(isa);</span><br><span class="line">        bool assoc = !UseGC &amp;&amp; _class_instancesHaveAssociatedObjects(isa_gen);</span><br><span class="line"></span><br><span class="line">        // This order is important.</span><br><span class="line">        if (cxx) object_cxxDestruct(obj);</span><br><span class="line">        if (assoc) _object_remove_assocations(obj);</span><br><span class="line"></span><br><span class="line">        if (!UseGC) objc_clear_deallocating(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>方法干了三件事</strong></p>
<ul>
<li><code>object_cxxDestruct</code></li>
<li><code>_object_remove_assocations</code>除去和这个对象<code>assocate</code>的对象(category)</li>
<li><code>objc_clear_deallocating</code>清空引用计数病清除弱引用表,将所有的<code>weak</code>引用置为<code>nil</code></li>
</ul>
<p><code>object_cxxDestruct</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">static void object_cxxDestructFromClass(id obj, Class cls)</span><br><span class="line">&#123;</span><br><span class="line">    void (*dtor)(id);</span><br><span class="line"></span><br><span class="line">    // Call cls&apos;s dtor first, then superclasses&apos;s dtors.</span><br><span class="line"></span><br><span class="line">    for ( ; cls != NULL; cls = _class_getSuperclass(cls)) &#123;</span><br><span class="line">        if (!_class_hasCxxStructors(cls)) return;</span><br><span class="line">        dtor = (void(*)(id))</span><br><span class="line">            lookupMethodInClassAndLoadCache(cls, SEL_cxx_destruct);</span><br><span class="line">        if (dtor != (void(*)(id))_objc_msgForward_internal) &#123;</span><br><span class="line">            if (PrintCxxCtors) &#123;</span><br><span class="line">                _objc_inform(&quot;CXX: calling C++ destructors for class %s&quot;,</span><br><span class="line">                             _class_getName(cls));</span><br><span class="line">            &#125;</span><br><span class="line">            (*dtor)(obj);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>沿着继承链往上搜索<code>SEL_cxx_destruct</code>,直到找到函数(<code>void(*)(id)</code>)实现后返回</p>
</blockquote>
<p><code>.cxx_destruct</code>这个方法是C++对象析构的,ARC借用这个方法插入代码实现了自动释放的工作<br>这个方法最终会调用<code>objc_storeStrong</code>,遍历当前对象的所有实例变量(Ivars)进行形如<code>objc_storeStrong(&amp;ivar, null)</code>,实例对象就被<code>release</code>和置为<code>nil</code></p>
<p><code>objc_storeStrong</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">id objc_storeStrong(id *object, id value) &#123;</span><br><span class="line">  value = [value retain];</span><br><span class="line">  id oldValue = *object;</span><br><span class="line">  *object = value;</span><br><span class="line">  [oldValue release];</span><br><span class="line">  return value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="容易出现的问题"><a href="#容易出现的问题" class="headerlink" title="容易出现的问题"></a>容易出现的问题</h3><blockquote>
<p>在某些情况下如果使用self.name=nil这种写法会使程序造成错误甚至崩溃。<br>假设在父类的dealloc方法中使用读写方法（self.name=nil）进行置空操作，如果子类重写了其读写方法，当所创建的子类对象销毁时进而调用父类的dealloc方法，就会造成访问已释放对象的情况，从而发生崩溃</p>
</blockquote>
<p><strong>父类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#import </span><br><span class="line">@interface BaseClass : NSObject</span><br><span class="line"></span><br><span class="line">@property(nonatomic) NSString *baseObj;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;BaseClass.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation BaseClass</span><br><span class="line"></span><br><span class="line">- (void)dealloc &#123;</span><br><span class="line">    self.baseObj = nil;//读写方法置空</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p><strong>子类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;BaseClass.h&quot;</span><br><span class="line"></span><br><span class="line">@interface SubClass : BaseClass</span><br><span class="line"></span><br><span class="line">@property (nonatomic) NSString *subObj;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;SubClass.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation SubClass</span><br><span class="line"></span><br><span class="line">- (void)setBaseObj:(NSString *)baseObj &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,[NSString stringWithString:_subObj]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)dealloc &#123;</span><br><span class="line">    _subObj = nil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>主VC</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line"></span><br><span class="line">    SubClass *s = [[SubClass alloc]init];</span><br><span class="line">    s.subObj = @&quot;子类属性&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://oxn0lcico.bkt.clouddn.com/dealloc.gif" alt="试试"></p>
<p><strong>参考</strong></p>
<p><a href="http://blog.devtang.com/2011/08/10/do-not-use-accessor-in-init-and-dealloc-method/" target="_blank" rel="noopener">不要在init和dealloc函数中使用accessor | 唐巧的博客</a></p>
<p><a href="https://blog.sunnyxx.com/2014/04/02/objc_dig_arc_dealloc/" target="_blank" rel="noopener">ARC下dealloc过程</a></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2018/08/08/dealloc用法/" class="archive-article-date">
  	<time datetime="2018-08-08T12:24:28.000Z" itemprop="datePublished"><i class="icon-clock"></i>2018-08-08</time>
</a>
      
      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/OC/">OC</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
  
    <a href="/2018/07/14/深入探讨Block循环引用/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">深入探讨Block循环引用</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style_32x32">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="dealloc用法" data-title="dealloc用法" data-url="http://yoursite.com/2018/08/08/dealloc用法/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"tushizhan"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>





      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 涂世坤
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/tutu279737146">我的github</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://weibo.com/5616393521/profile?rightmod=1&wvr=6&mod=personinfo&is_all=1">我的微博</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">这个人很帅&lt;br&gt;他什么都不想说&lt;br&gt;</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>